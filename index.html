<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="stylesheet" href="css/leaflet.css"><link rel="stylesheet" href="css/L.Control.Locate.min.css">
        <link rel="stylesheet" href="css/qgis2web.css"><link rel="stylesheet" href="css/fontawesome-all.min.css">
        <link rel="stylesheet" href="css/leaflet-measure.css">
		<link rel="stylesheet" href="lib/leaflet-groupedlayercontrol/dist/leaflet.groupedlayercontrol.min.css" />
	
        <style>
        html, body, #map {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
		}
        </style>
        <title></title>
    </head>
    <body>
        <div id="map">
        </div>
        <script src="js/qgis2web_expressions.js"></script>
        <script src="js/leaflet.js"></script><script src="js/L.Control.Locate.min.js"></script>
        <script src="js/leaflet.rotatedMarker.js"></script>
        <script src="js/leaflet.pattern.js"></script>
        <script src="js/leaflet-hash.js"></script>
        <script src="js/Autolinker.min.js"></script>
        <script src="js/rbush.min.js"></script>
        <script src="js/labelgun.min.js"></script>
        <script src="js/labels.js"></script>
        <script src="js/leaflet-measure.js"></script>
		<script src="lib/leaflet-groupedlayercontrol/dist/leaflet.groupedlayercontrol.min.js"></script>
        <script>
        var map = L.map('map', {
            zoomControl:true, maxZoom:28, minZoom:1
        }).fitBounds([[3.103335774177818,-77.03832093904326],[3.786969568871638,-75.9982775098055]]);
        var hash = new L.Hash(map);
        map.attributionControl.setPrefix('<a href="https://github.com/tomchadwin/qgis2web" target="_blank">qgis2web</a> &middot; <a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> &middot; <a href="https://qgis.org">QGIS</a>');
        L.control.locate({locateOptions: {maxZoom: 19}}).addTo(map);
        var measureControl = new L.Control.Measure({
            position: 'topleft',
            primaryLengthUnit: 'meters',
            secondaryLengthUnit: 'kilometers',
            primaryAreaUnit: 'sqmeters',
            secondaryAreaUnit: 'hectares'
        });
        measureControl.addTo(map);
        document.getElementsByClassName('leaflet-control-measure-toggle')[0]
        .innerHTML = '';
        document.getElementsByClassName('leaflet-control-measure-toggle')[0]
        .className += ' fas fa-ruler';
        var bounds_group = new L.featureGroup([]);
        function setBounds() {
        }
        var layer_OpenStreetMap_0 = L.tileLayer('http://a.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            opacity: 1.0,
            attribution: '',
            minZoom: 1,
            maxZoom: 28,
            minNativeZoom: 0,
            maxNativeZoom: 19
        });
        layer_OpenStreetMap_0;
        map.addLayer(layer_OpenStreetMap_0);
        setBounds();
		
		
		/*WMS PARQUEADEROS*/
		var wmsLayer1 = L.tileLayer.wms('http://www.appmap.gis-cdn.net/geoserver/proyecto_sig/wms?', {
		layers: 'proyecto_sig:parqueaderos_motos',
		attribution: 'parqueaderos_motos',
		format: 'image/png',
		transparent: true,
		});
		wmsLayer1.addTo(map);
		
		/*POPUP*/
		/*var source3 = L.WMS.source("http://www.appmap.gis-cdn.net/geoserver/proyecto_sig/wms?", {
			opacity: 0.1,
		});
		source3.getLayer("parqueaderos_motos").addTo(mymap);*/

		var wmsLayer2 = L.tileLayer.wms('http://www.appmap.gis-cdn.net/geoserver/proyecto_sig/wms?', {
		layers: 'proyecto_sig:parqueaderos_carros',
		attribution: 'parqueaderos_carros',
		format: 'image/png',
		transparent: true,
		});
		wmsLayer2.addTo(map);
		
		/*POPUP*/
		/*var source1 = L.WMS.source("http://localhost:8080/geoserver/proyecto_sig/wms?", {
			opacity: 0.1,
		});
		source1.getLayer("parqueaderos_carros").addTo(mymap);*/
		
		var wmsLayer3 = L.tileLayer.wms('http://www.appmap.gis-cdn.net/geoserver/proyecto_sig/wms?', {
		layers: 'proyecto_sig:parqueaderos_camion1',
		attribution: 'parqueaderos_camion1',
		format: 'image/png',
		transparent: true,
		});
		wmsLayer3.addTo(map);
		
		/*POPUP*/
		/*var source2 = L.WMS.source("http://localhost:8080/geoserver/proyecto_sig/wms?", {
			opacity: 0.1,
		});
		source2.getLayer("parqueaderos_camion1").addTo(mymap);*/
		
		var wmsLayer4 = L.tileLayer.wms('http://www.appmap.gis-cdn.net/geoserver/proyecto_sig/wms?', {
		layers: 'proyecto_sig:parqueaderos_camion2',
		attribution: 'parqueaderos_camion2',
		format: 'image/png',
		transparent: true,
		});
		wmsLayer4.addTo(map);


		/*CONTROL DE CAPAS*/
		var groupedOverlays = {
			"Motos": wmsLayer1,
			"carros": wmsLayer2,
			"camion1": wmsLayer3,
			"camion2": wmsLayer4
		};
		L.control.groupedLayers(groupedOverlays).addTo(map);
		
		
				/*UBICACION SIN PEDIRLA*/
		function loadLocation () {
			//inicializamos la funcion y definimos  el tiempo maximo ,las funciones de error y exito.
			navigator.geolocation.getCurrentPosition(viewMap,ViewError,{timeout:1000});
		}
		
		
		
		//HACE PARTE DE LA UBICACION, TAMBIEN SE ANEXA LA UBICACION DEL USUARIO CON UNA MARCA SOBRE LA CARTOGRAFIA MAS UN RADIO DE BUSQUEDA QUE ES UN CIRCULO
		function viewMap (position) { 
			var lon = position.coords.longitude;	//guardamos la longitud
			var lat = position.coords.latitude;		//guardamos la latitud
			/*UBICACION DE USUARIO*/
			var marker = L.marker([lat, lon]).addTo(map);
			marker.bindPopup("Â¡Aqui estas!");
			/*RADIO DE BUSQUEDA*/
			var elem = document.getElementById('rango')
			var circle = L.circle([lat, lon], {
					color: 'red',
					fillColor: 'blue',
					fillOpacity: 0.3,
					radius: 1500
				}).addTo(map);
			
			
			var link = "http://maps.google.com/?ll="+lat+","+lon+"&z=14";
			document.getElementById("long").innerHTML = "Longitud: "+lon;
			document.getElementById("latitud").innerHTML = "Latitud: "+lat;

			document.getElementById("link").href = link;
		}

		function ViewError (error) {
		alert(error.code);
		}

	

		
        </script>
    </body>
</html>
